<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Reporting System</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/shared-styles.css') }}">
<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    window.mermaid = mermaid;
</script>    <style>
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        .feature-item {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
        }
        .schema-table {
            width: 100%;
            margin-top: 15px;
        }
        .schema-table th {
            text-align: left;
            background-color: #f2f2f2;
        }
        .schema-table td, .schema-table th {
            padding: 8px;
            border: 1px solid #ddd;
        }
        /* Modal styles */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgb(0,0,0); 
            background-color: rgba(0,0,0,0.4); 
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <header>
        <h1>Sales Reporting System</h1>
    </header>
    <nav>
        <div class="menu-toggle" id="mobile-menu">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>
        <ul class="nav-list">
            <li><a href="/">Home</a></li>
            <li><a href="/files">Upload Files</a></li>
            <li><a href="/table_data">Data Preview</a></li>
            <li><a href="/visualizations">BI Dashboards</a></li>
            <li><a href="/explore_data">QuickQueryAI</a></li>
            <li><a href="/admin">Admin</a></li>
        </ul>
    </nav>
    <div class="container">
        <h2>Welcome to Sales Reporting System</h2>
        
        <div class="section">
            <div class="section-header">About Our System</div>
            <p>The Sales Reporting System is an advanced web application designed to help businesses process, analyze, and visualize their sales data efficiently. Our platform offers a seamless experience from data upload to insightful visualizations, powered by cutting-edge technologies and integrated with Azure services. <br><br> Sample files are already uploaded and ingested into the tables, and data is avaiable for testing rest of the features already.</p>
        </div>
        
        <div class="section">
            <div class="section-header">Key Features</div>
            <div class="feature-grid">
                <div class="feature-item">
                    <h3>1. File Upload</h3>
                    <p>Easily upload your dimension and fact tables through our intuitive interface.</p>
                </div>
                <div class="feature-item">
                    <h3>2. Data Processing</h3>
                    <p>Automatic validation and processing of metrics across various dimensions.</p>
                </div>
                <div class="feature-item">
                    <h3>3. BI Dashboards</h3>
                    <p>Explore comprehensive reports through interactive Power BI dashboards.</p>
                </div>
                <div class="feature-item">
                    <h3>4. QuickQuery AI</h3>
                    <p>Ask questions about your data in natural language and get instant insights.</p>
                </div>
            </div>
        </div>
        
 <div class="section">
            <div class="section-header">Data Schema</div>
            <p>Our system is designed to work with a specific set of tables. Understanding this schema will help you prepare your data for upload and analysis:</p>
    <p>
        <a href="#" id="dataModelLink" style="font-size: 0.8em">[View Data Model]</a>
        <span style="margin: 0 10px;">|</span>
        <a href="https://drive.google.com/drive/folders/1jkroPC4ibtWjQ3z9idkegrqqzO7YJb0Q?usp=drive_link" target="_blank" style="font-size: 0.8em">[View Sample Data]</a>
    </p>
                <div class="overflow-container">
                <table>
                    <tr>
                        <th>Table</th>
                        <th>Fields</th>
                    </tr>
                    <tr>
                        <td>Transactions</td>
                        <td>transaction_id, timestamp, customer_id, product_id, employee_id, payment_id, quantity, total_amount</td>
                    </tr>
                    <tr>
                        <td>Products</td>
                        <td>product_id, product_name, product_category, unit_price</td>
                    </tr>
                    <tr>
                        <td>Payments</td>
                        <td>payment_id, payment_type</td>
                    </tr>
                    <tr>
                        <td>Employees</td>
                        <td>employee_id, employee_name, employee_ssn, employee_phone, employee_state, employee_city, employee_postal</td>
                    </tr>
                    <tr>
                        <td>Customers</td>
                        <td>customer_id, customer_first_name, customer_last_name, customer_city, customer_state, customer_postal, customer_email, customer_phone</td>
                    </tr>
                </table>
            </div>
        </div>
        
        <div class="section">
            <div class="section-header">How It Works</div>
            <ol>
                <li><strong>Upload Your Data:</strong> Start by uploading your dimension and fact tables.</li>
                <li><strong>Data Processing:</strong> Our system validates your data and calculates key metrics.</li>
                <li><strong>Explore Dashboards:</strong> Access pre-built Power BI dashboards for immediate insights.</li>
                <li><strong>Ask Questions:</strong> Use QuickQuery AI to ask specific questions about your data.</li>
                <li><strong>Visualize and Export:</strong> View results as tables or charts, and export them for further analysis.</li>
            </ol>
        </div> 
    </div>

    <!-- Add the modal for the data schema -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modal-mermaid-container">
                <pre class="mermaid" id="modal-mermaid">
erDiagram
    TRANSACTIONS ||--o{ PRODUCTS : contains
    TRANSACTIONS ||--|| CUSTOMERS : involves
    TRANSACTIONS ||--|| EMPLOYEES : processed_by
    TRANSACTIONS ||--|| PAYMENTS : uses
    TRANSACTIONS {
        int transaction_id PK
        datetime timestamp
        int customer_id FK
        int product_id FK
        int employee_id FK
        int payment_id FK
        int quantity
        decimal total_amount
    }
    PRODUCTS {
        int product_id PK
        string product_name
        string product_category
        decimal unit_price
    }
    PAYMENTS {
        int payment_id PK
        string payment_type
    }
    EMPLOYEES {
        int employee_id PK
        string employee_name
        string employee_ssn
        string employee_phone
        string employee_state
        string employee_city
        string employee_postal
    }
    CUSTOMERS {
        int customer_id PK
        string customer_first_name
        string customer_last_name
        string customer_city
        string customer_state
        string customer_postal
        string customer_email
        string customer_phone
    }
                </pre>
            </div>
        </div>
    </div>

<script>
    // JavaScript for mobile menu toggle
    const mobileMenu = document.getElementById('mobile-menu');
    const navList = document.querySelector('.nav-list');

    mobileMenu.addEventListener('click', () => {
        navList.classList.toggle('active');
    });

    // Initialize Mermaid
    document.addEventListener("DOMContentLoaded", function () {
        mermaid.initialize({ startOnLoad: false });
    });

    // Get the modal
    var modal = document.getElementById("myModal");

    // Get the link that opens the modal
    var btn = document.getElementById("dataModelLink");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks the link, open the modal 
    btn.onclick = function(event) {
        event.preventDefault(); // Prevent the default link behavior
        modal.style.display = "block";
        mermaid.init(undefined, document.querySelector(".mermaid"));
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
        modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>
</body>
</html>